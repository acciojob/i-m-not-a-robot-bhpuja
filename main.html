
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Human Verification</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h3 id="h">Please click on the identical tiles to verify that you are not a robot.</h3>
  <div id="image-container">
    <!-- Images will be dynamically added here by JavaScript -->
  </div>
  <button id="reset" style="display: none;">Reset</button>
  <button id="verify" style="display: none;">Verify</button>
  <p id="para"></p>

  <script>
    const imageClasses = ["img1", "img2", "img3", "img4", "img5"];
    const imageContainer = document.getElementById("image-container");
    const resetButton = document.getElementById("reset");
    const verifyButton = document.getElementById("verify");
    const para = document.getElementById("para");

    let selectedImages = [];
    let images = [];

    function initializeGame() {
      // Clear previous state
      imageContainer.innerHTML = "";
      selectedImages = [];
      para.textContent = "";
      resetButton.style.display = "none";
      verifyButton.style.display = "none";

      // Prepare the image set
      const repeatedImageClass = imageClasses[Math.floor(Math.random() * imageClasses.length)];
      images = [...imageClasses, repeatedImageClass];

      // Shuffle images
      images.sort(() => Math.random() - 0.5);

      // Render images
      images.forEach((imgClass, index) => {
        const img = document.createElement("div");
        img.className = imgClass;
        img.dataset.index = index;
        img.addEventListener("click", handleImageClick);
        imageContainer.appendChild(img);
      });
    }

    function handleImageClick(event) {
      const img = event.currentTarget;
      const imgIndex = img.dataset.index;

      // Prevent double-clicking the same image
      if (selectedImages.includes(imgIndex)) return;

      // Add the clicked image to selectedImages
      selectedImages.push(imgIndex);

      // Show Reset button after the first click
      if (selectedImages.length === 1) {
        resetButton.style.display = "block";
      }

      // Show Verify button after the second click
      if (selectedImages.length === 2) {
        verifyButton.style.display = "block";
      }

      // Prevent further clicks once two images are selected
      if (selectedImages.length > 2) {
        selectedImages = selectedImages.slice(0, 2);
      }
    }

    verifyButton.addEventListener("click", () => {
      const [firstIndex, secondIndex] = selectedImages;
      const firstImageClass = images[firstIndex];
      const secondImageClass = images[secondIndex];

      // Check if the two selected images are identical
      if (firstImageClass === secondImageClass) {
        para.textContent = "You are a human. Congratulations!";
      } else {
        para.textContent = "We can't verify you as a human. You selected the non-identical tiles.";
      }

      // Hide Verify button after verification
      verifyButton.style.display = "none";
    });

    resetButton.addEventListener("click", () => {
      initializeGame();
    });

    // Initialize the game on page load
    initializeGame();
  </script>
</body>
</html>
